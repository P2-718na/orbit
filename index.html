<!DOCTYPE html>
<html lang="en-US" encoding="utf8">
<head>
  <title>Orbit</title>
  <style type="text/css">
    #canvass {
      width: 100%;
      height: 100%;
      z-index: -1;
      position: absolute;
      top: 0;
      left: 0;
    }
  </style>
</head>
<body>
  <div class="slidecontainer">
    <label for="dt">dt</label>
    <input type="range" min="1" max="50" value="5" class="slider" id="dt" onchange="reset()" name="dt"><br>
    <label for="v0x">v0x</label>
    <input type="range" min="-10" max="10" value="1" class="slider" id="v0x" onchange="reset()" name="v0x">
    <label for="v0y">v0y</label>
    <input type="range" min="-10" max="10" value="2" class="slider" id="v0y" onchange="reset()" name="v0y"><br>
    <label for="GM">GM</label>
    <input type="range" min="1" max="50000" value="10000" class="slider" id="GM" onchange="reset()" name="GM">
  </div>
  <canvas class="dots" id="canvass">Your browser does not support canvas.</canvas>

 
</body>
<script type="text/javascript">
  let shitf = false;
  function drawLineWithArrows(ctx, x0,y0,x1,y1, strokeStyle = "#000000", lw = 1, aWidth = 5,aLength = 5, arrowStart = false ,arrowEnd = true){
    var dx=x1-x0;
    var dy=y1-y0;
    var angle=Math.atan2(dy,dx);
    var length=Math.sqrt(dx*dx+dy*dy);
    //
    let old = ctx.strokeStyle;
    let oldv = ctx.lineWidth;
    ctx.lineWidth = lw;

    ctx.strokeStyle = strokeStyle;
    ctx.translate(x0,y0);
    ctx.rotate(angle);
    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.lineTo(length,0);
    if(arrowStart){
        ctx.moveTo(aLength,-aWidth);
        ctx.lineTo(0,0);
        ctx.lineTo(aLength,aWidth);
    }
    if(arrowEnd){
        ctx.moveTo(length-aLength,-aWidth);
        ctx.lineTo(length,0);
        ctx.lineTo(length-aLength,aWidth);
    }
    //
    ctx.stroke();
    ctx.setTransform(1,0,0,1,0,0);
    ctx.strokeStyle = old;
    ctx.lineWidth = oldv;
  } // drawLineWithArrows

  // Setup the canvas element.
  var canvas = document.getElementById("canvass")
  var context = canvas.getContext("2d")

  // Set Canvas dimensions
  canvas.width   = window.innerWidth;
  canvas.height  = window.innerHeight;

  // Get drawing context
  var c3 = canvas.getContext( '2d' );

  // Center Position
  let xc = 250;
  let yc = 500;
  let radius = 200;

  // Starting Position
  var x0 = 250;
  var y0 = 500;

  let x = x0;
  let y = y0;

  canvas.addEventListener('mousemove', function(e) {
    x0 = e.clientX
    y0 = e.clientY
    reset()

    const min = Math.min(radius - r(x0, y0, xc, yc), r(x0, y0, xc, yc))

    context.beginPath();
    context.arc(x0, y0, min, 0, 2 * Math.PI);
    context.stroke();

    context.beginPath();
    context.arc(x0, y0, 1, 0, 2 * Math.PI);
    context.stroke();

  }, false);

  const r = (x, y, x2, y2) => {
    return Math.sqrt(Math.pow((x - x2), 2) + Math.pow((y - y2), 2))
  }

  const reset = () => {
    console.log("reset")
    context.width   = window.innerWidth;
    context.height  = window.innerHeight;

    c3.clearRect( 0, 0 , canvas.width, canvas.height );

    // Starting Position
    x = x0;
    y = y0;

    context.beginPath();
    // draw circle
    context.arc(xc, yc, radius, 0, 2 * Math.PI);
    context.arc(xc, yc, 1, 0, 2 * Math.PI);
    context.stroke();
  }

  window.onresize = reset

  reset();
  animate3();
</script>

</html>